(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5510:(e,t,r)=>{Promise.resolve().then(r.bind(r,454))},454:(e,t,r)=>{"use strict";r.d(t,{default:()=>z});var s=r(5155),l=r(2115);let a=async(e,t)=>{let r={id:t};e.status&&e.statusText&&(r={...r,status:e.status,statusText:e.statusText});try{if(e.body){let t=await e.json();r=t.error?{...r,message:t.error.message,type:t.error.type}:{...r,message:"response body.error empty"}}else r={...r,message:"response body empty"};return JSON.stringify(r)}catch(e){return JSON.stringify(r={...r,message:"fail error get process"})}};var i=r(4928),n=r(2118);let o=(0,n.eU)({motion:"",limit:300,args:[]}),d=(0,n.eU)("before");(0,n.eU)(null);let c=[{id:"gov_argument",title:"賛成側立論"},{id:"opp_argument",title:"反対側立論"},{id:"gov_rebuttal",title:"賛成側反論"},{id:"opp_rebuttal",title:"反対側反論"},{id:"gov_summary",title:"賛成側まとめ"},{id:"opp_summary",title:"反対側まとめ"},{id:"judge",title:"判定"}],f=[100,200,300,400,500],m=()=>{let[e,t]=(0,i.fp)(o),{motion:r,limit:s}=e,[n,f]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),u=(0,i.Xr)(d);(0,l.useEffect)(()=>{g(r)},[]);let h=e=>{0===e.length?x("議題を入力してください"):e.length>100?x("100文字未満で入力してください"):x("")},g=e=>{e.length>0&&e.length<=100?f(!0):f(!1)};return{editMotion:r=>{let s=r.target.value;t({...e,motion:s}),g(s),h(s)},editLimit:r=>{t({...e,limit:r})},runDebateProcess:async()=>{u("inProcess"),t({...e,args:[]});let l=[];try{for(let i=0;i<c.length;i++){let n={motion:r,limit:s,args:l},o={"Content-Type":"application/json"},d="".concat("http://localhost:8787","/debate/").concat(c[i].id),f=await fetch(d,{method:"POST",headers:o,body:JSON.stringify(n)});if(!f.ok||!f.body){u("error");let e=await a(f,c[i].id);console.log(e);return}l=[...l,{title:c[i].title,content:""}],t({...e,args:l});let m=f.body.getReader(),x=new TextDecoder,h="";for(;;){let{done:r,value:s}=await m.read();if(r)break;h+=x.decode(s,{stream:!0}),l=[...l.slice(0,-1),{...l.at(-1),content:h}],t({...e,args:l})}}u("finish")}catch(e){u("error"),console.log({message:"unknown error occured: ".concat(e),status:500})}},initializeDebateProcess:()=>{t({motion:"",limit:300,args:[]}),u("before")},initializeDebateProcessAfterError:()=>{t({...e,args:[]}),u("before")},sendable:n,formMessage:m}};var x=r(3463),u=r(9795);function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,u.QP)((0,x.$)(t))}let g=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("rounded-xl border bg-card text-card-foreground shadow",r),...l})});g.displayName="Card";let p=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("flex flex-col space-y-1.5 p-6",r),...l})});p.displayName="CardHeader";let b=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("font-semibold leading-none tracking-tight",r),...l})});b.displayName="CardTitle";let y=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("text-sm text-muted-foreground",r),...l})});y.displayName="CardDescription";let v=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("p-6 pt-0",r),...l})});v.displayName="CardContent",l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:h("flex items-center p-6 pt-0",r),...l})}).displayName="CardFooter";let j=l.forwardRef((e,t)=>{let{className:r,type:l,...a}=e;return(0,s.jsx)("input",{type:l,className:h("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});j.displayName="Input";var N=r(472),w=r(1027);let C=(0,w.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)(N.b,{ref:t,className:h(C(),r),...l})});k.displayName=N.b.displayName;var _=r(1290);let R=(0,w.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),T=l.forwardRef((e,t)=>{let{className:r,variant:l,size:a,asChild:i=!1,...n}=e,o=i?_.DX:"button";return(0,s.jsx)(o,{className:h(R({variant:l,size:a,className:r})),ref:t,...n})});function P(){let{editMotion:e,editLimit:t,runDebateProcess:r,sendable:l,formMessage:a}=m(),{motion:n,limit:d}=(0,i.md)(o);return(0,s.jsxs)(g,{className:"w-[600px]",children:[(0,s.jsxs)(p,{children:[(0,s.jsx)(b,{children:"ディベートの設定"}),(0,s.jsx)(y,{children:"議題と制限文字数を設定してください"})]}),(0,s.jsxs)(v,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k,{children:"議題"}),(0,s.jsx)(j,{type:"text",value:n,onChange:e,placeholder:"「〇〇すべき、であるべき」のような肯定系の文にしてください"}),""!==a&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:a})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(k,{children:"立論の制限文字数"}),(0,s.jsx)("div",{className:"flex justify-around",children:f.map((e,r)=>(0,s.jsx)(T,{className:"transition-all border-2 rounded-lg px-4 py-2 ".concat(e===d?"border-gray-900 bg-gray-300 text-gray-900 font-bold shadow-lg hover:bg-gray-400":"border-gray-400 bg-white text-gray-700 hover:bg-gray-100"),onClick:()=>{t(e)},children:e},"".concat(e).concat(r)))})]})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(T,{onClick:r,disabled:!l,className:"w-full",children:"始める"})})]})}T.displayName="Button";var D=r(4206);function E(e){let{arg:t,width:r}=e;return(0,s.jsxs)(g,{style:{width:null!=r?r:500},children:[(0,s.jsx)(p,{children:(0,s.jsx)(b,{children:t.title})}),(0,s.jsx)(v,{children:(0,s.jsx)(D.o,{className:"prose prose-sm",children:t.content})})]})}let O=e=>{let t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight,behavior:"smooth"})},[e]),{scrollRef:t}};function S(){let{args:e,motion:t}=(0,i.md)(o),r=(0,i.md)(d),{initializeDebateProcess:l,initializeDebateProcessAfterError:a}=m(),{scrollRef:n}=O(e),f=e=>e===c.length-1?{marginTop:60,justifyContent:"center"}:e%2==0?{marginLeft:40,justifyContent:"start"}:{marginRight:40,justifyContent:"end"},x=e=>e===c.length-1?1e3:void 0;return(0,s.jsxs)("div",{className:"w-full flex flex-col items-center h-screen",children:[(0,s.jsx)("header",{className:"w-full p-8 flex items-center justify-center bg-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"text-lg font-bold",children:"議題"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:t})]})}),(0,s.jsx)("main",{className:"w-full flex justify-center overflow-y-auto flex-1",ref:n,children:(0,s.jsx)("div",{className:"w-[1000px] flex flex-col items-center gap-10",children:e.map((e,t)=>(0,s.jsx)("div",{style:f(t),className:"w-full flex",children:(0,s.jsx)(E,{arg:e,width:x(t)})},"".concat(e.title).concat(t)))})}),(0,s.jsxs)("footer",{className:"w-full p-8 flex items-center justify-center bg-gray-100",children:["inProcess"===r&&(0,s.jsx)("div",{className:"flex flex-col items-center",children:(0,s.jsxs)("div",{className:"flex mb-5 items-center gap-2",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-primary",children:"ディベート中"}),(0,s.jsx)("div",{className:"w-7 h-7 border-4 border-black border-t-transparent rounded-full animate-spin"})]})}),"finish"===r&&(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"mb-5 text-xl font-bold text-primary",children:"ディベートが終了しました"}),(0,s.jsx)(T,{variant:"outline",onClick:l,className:"w-60",children:"ホームに戻る"})]}),"error"===r&&(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"mb-5 text-xl font-bold text-red-500",children:"ディベートに失敗しました"}),(0,s.jsx)(T,{variant:"outline",onClick:a,className:"w-60",children:"もう一度ディベートを行う"})]})]})]})}function z(){let e=(0,i.md)(d);return(0,s.jsx)("div",{children:"before"===e?(0,s.jsx)("div",{className:"w-full flex flex-col items-center",children:(0,s.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,s.jsx)("div",{className:"text-4xl font-bold text-primary mx-16",children:"ディベートを始める"}),(0,s.jsx)(P,{})]})}):(0,s.jsx)(S,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[928,277,441,517,358],()=>t(5510)),_N_E=e.O()}]);